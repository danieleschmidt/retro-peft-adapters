# Retro-PEFT-Adapters Environment Configuration

# =============================================================================
# Model Configuration
# =============================================================================

# Base model settings
BASE_MODEL_NAME="meta-llama/Llama-2-7b-hf"
BASE_MODEL_CACHE_DIR="./models"
MODEL_MAX_LENGTH=2048
MODEL_DEVICE="auto"  # auto, cpu, cuda, cuda:0, etc.

# Quantization settings
USE_QUANTIZATION=false
QUANTIZATION_TYPE="4bit"  # 4bit, 8bit
QUANTIZATION_DTYPE="float16"  # float16, bfloat16

# =============================================================================
# Retrieval Configuration  
# =============================================================================

# Default embedding model
EMBEDDING_MODEL="sentence-transformers/all-mpnet-base-v2"
EMBEDDING_CACHE_DIR="./cache/embeddings"
EMBEDDING_BATCH_SIZE=32

# Vector database backends
VECTOR_DB_BACKEND="faiss"  # faiss, qdrant, weaviate

# FAISS settings
FAISS_INDEX_PATH="./indices/faiss"
FAISS_USE_GPU=false

# Qdrant settings
QDRANT_HOST="localhost"
QDRANT_PORT=6333
QDRANT_API_KEY=""
QDRANT_COLLECTION_NAME="retro_peft_docs"

# Weaviate settings  
WEAVIATE_HOST="localhost"
WEAVIATE_PORT=8080
WEAVIATE_API_KEY=""
WEAVIATE_CLASS_NAME="RetroPeftDocs"

# =============================================================================
# Training Configuration
# =============================================================================

# Training hyperparameters
LEARNING_RATE=1e-4
BATCH_SIZE=4
GRADIENT_ACCUMULATION_STEPS=4
NUM_EPOCHS=3
MAX_GRAD_NORM=1.0
WARMUP_STEPS=100

# Adapter settings
LORA_RANK=16
LORA_ALPHA=32
LORA_DROPOUT=0.1
ADALORA_INITIAL_RANK=64
ADALORA_TARGET_RANK=8
IA3_SCALE_FACTOR=2.0

# Retrieval training settings
RETRIEVAL_WEIGHT=0.3
RETRIEVAL_K=5
USE_HARD_NEGATIVES=true
HARD_NEGATIVE_RATIO=0.5

# =============================================================================
# Caching Configuration
# =============================================================================

# Redis cache (L1)
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""
REDIS_DB=0
REDIS_CACHE_TTL=3600

# RocksDB cache (L2)  
ROCKSDB_PATH="./cache/rocksdb"
ROCKSDB_CACHE_SIZE="1GB"

# S3 cache (L3)
S3_BUCKET=""
S3_REGION="us-east-1"
S3_ACCESS_KEY=""
S3_SECRET_KEY=""
S3_CACHE_PREFIX="retro-peft-cache/"

# =============================================================================
# Serving Configuration
# =============================================================================

# API server settings
API_HOST="0.0.0.0"
API_PORT=8000
API_WORKERS=4
API_TIMEOUT=30
API_MAX_BATCH_SIZE=32

# Load balancing
ENABLE_LOAD_BALANCING=false
LOAD_BALANCER_STRATEGY="round_robin"  # round_robin, least_connections

# Auto-scaling
ENABLE_AUTO_SCALING=false
MIN_WORKERS=2
MAX_WORKERS=8
SCALE_UP_THRESHOLD=0.8
SCALE_DOWN_THRESHOLD=0.3

# =============================================================================
# Monitoring & Logging
# =============================================================================

# Logging configuration
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR
LOG_FORMAT="json"  # json, text
LOG_FILE="./logs/retro_peft.log"
ENABLE_STRUCTURED_LOGGING=true

# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH="/metrics"

# OpenTelemetry tracing
ENABLE_TRACING=false
JAEGER_ENDPOINT="http://localhost:14268/api/traces"
TRACE_SAMPLE_RATE=0.1

# Health checks
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# =============================================================================
# Security Configuration
# =============================================================================

# Authentication
ENABLE_AUTH=false
JWT_SECRET_KEY="your-secret-key-change-this"
JWT_EXPIRATION_HOURS=24
API_KEY_HEADER="X-API-Key"

# Rate limiting
ENABLE_RATE_LIMITING=false
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60  # seconds

# CORS settings
ENABLE_CORS=true
CORS_ORIGINS="*"
CORS_METHODS="GET,POST,PUT,DELETE"
CORS_HEADERS="*"

# =============================================================================
# Development Settings
# =============================================================================

# Debug mode
DEBUG=false
DEVELOPMENT_MODE=false

# Testing
TEST_MODEL_NAME="microsoft/DialoGPT-small"
TEST_EMBEDDING_MODEL="sentence-transformers/all-MiniLM-L6-v2"
TEST_DATA_PATH="./tests/data"

# Profiling
ENABLE_PROFILING=false
PROFILE_OUTPUT_DIR="./profiles"

# =============================================================================
# Experimental Features
# =============================================================================

# Multi-modal support (experimental)
ENABLE_MULTIMODAL=false
VISION_MODEL="openai/clip-vit-base-patch32"

# Federated learning (experimental)
ENABLE_FEDERATED=false
FEDERATION_SERVER_URL=""

# Real-time adaptation (experimental)
ENABLE_ONLINE_LEARNING=false
ONLINE_LEARNING_RATE=1e-5